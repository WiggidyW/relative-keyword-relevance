{
  "type": "vector.function",
  "description": "Keyword-based Relevance Rankings.  Discover which piece of content is most relevant to specific keywords.",
  "input_schema": {
    "type": "object",
    "properties": {
      "keywords": {
        "type": "array",
        "description": "Keywords to evaluate relevance against.",
        "minItems": 1,
        "items": {
          "type": "string",
          "description": "A keyword to evaluate relevance against."
        }
      },
      "contentItems": {
        "type": "array",
        "description": "Content items to be ranked for relevance.",
        "minItems": 1,
        "items": {
          "anyOf": [
            {
              "type": "string",
              "description": "Text content to be evaluated for relevance."
            },
            {
              "type": "image",
              "description": "Image content to be evaluated for relevance."
            },
            {
              "type": "video",
              "description": "Video content to be evaluated for relevance."
            },
            {
              "type": "audio",
              "description": "Audio content to be evaluated for relevance."
            },
            {
              "type": "file",
              "description": "File content to be evaluated for relevance."
            },
            {
              "type": "array",
              "description": "Array of content pieces to be evaluated for relevance.",
              "minItems": 1,
              "items": {
                "anyOf": [
                  {
                    "type": "string",
                    "description": "Text content to be evaluated for relevance."
                  },
                  {
                    "type": "image",
                    "description": "Image content to be evaluated for relevance."
                  },
                  {
                    "type": "video",
                    "description": "Video content to be evaluated for relevance."
                  },
                  {
                    "type": "audio",
                    "description": "Audio content to be evaluated for relevance."
                  },
                  {
                    "type": "file",
                    "description": "File content to be evaluated for relevance."
                  }
                ]
              }
            }
          ]
        }
      }
    },
    "required": [
      "keywords",
      "contentItems"
    ]
  },
  "input_maps": {
    "$jmespath": "to_array(input.contentItems)"
  },
  "tasks": [
    {
      "type": "scalar.function",
      "owner": "WiggidyW",
      "repository": "keyword-relevance",
      "commit": "0d42674eb6cfbfa074cee45cd60b5478b2404e9e",
      "map": 0,
      "input": {
        "$jmespath": "@.{keywords:input.keywords,content:map}"
      }
    },
    {
      "type": "vector.function",
      "owner": "WiggidyW",
      "repository": "relative-keyword-relevance-joined",
      "commit": "2efb7fdb5f1610006eca13bb5c4409d6c1158236",
      "input": {
        "$jmespath": "input"
      }
    },
    {
      "type": "vector.function",
      "owner": "WiggidyW",
      "repository": "relative-keyword-relevance-split",
      "commit": "6781bf9ffb290ae4a1fe2771a16dc7bc8d4a2cca",
      "input": {
        "$jmespath": "input"
      }
    }
  ],
  "output": {
    "$jmespath": "zip_map(&avg(@),[l1_normalize(tasks[0]),tasks[1],tasks[2]])"
  },
  "output_length": {
    "$jmespath": "length(input.contentItems)"
  },
  "input_split": {
    "$jmespath": "zip_map(&{keywords:@[0],contentItems:[@[1]]},[repeat(input.keywords,length(input.contentItems)),input.contentItems])"
  },
  "input_merge": {
    "$jmespath": "@.{keywords:input[0].keywords,contentItems:input[].contentItems[0]}"
  }
}